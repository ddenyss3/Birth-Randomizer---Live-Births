import streamlit as st
import pandas as pd
import random

# Sample dataset: country population (2023 est.)
# You can replace or expand this with up-to-date or detailed data
country_population = {
'Afghanistan' : 1469029,
'Albania' : 28803,
'Algeria' : 905981,
'American Samoa' : 731,
'Andorra' : 555,
'Angola' : 1381370,
'Anguilla' : 130,
'Antigua and Barbuda' : 1106,
'Argentina' : 503823,
'Armenia' : 34668,
'Aruba' : 1020,
'Australia' : 304340,
'Austria' : 77054,
'Azerbaijan' : 125136,
'Bahamas' : 4335,
'Bahrain' : 19558,
'Bangladesh' : 3489953,
'Barbados' : 3155,
'Belarus' : 65050,
'Belgium' : 101686,
'Belize' : 7410,
'Benin' : 478062,
'Bermuda' : 521,
'Bhutan' : 9958,
'Bolivia' : 260151,
'Bosnia and Herzegovina' : 24569,
'Botswana' : 61294,
'Brazil' : 2601670,
'British Virgin Islands' : 325,
'Brunei' : 6237,
'Bulgaria' : 62645,
'Burkina Faso' : 728612,
'Burundi' : 460882,
'Cambodia' : 361586,
'Cameroon' : 957392,
'Canada' : 356745,
'Cape Verde' : 6440,
'Caribbean Netherlands' : 280,
'Cayman Islands' : 865,
'Central African Republic' : 238858,
'Chad' : 819054,
'Chile' : 176196,
'China' : 8899881,
'Colombia' : 705009,
'Comoros' : 24366,
'Cook Islands' : 178,
'Costa Rica' : 51969,
'Croatia' : 31446,
'Cuba' : 95938,
'Cura√ßao' : 1394,
'Cyprus' : 14524,
'Czech Republic' : 91845,
'Democratic Republic of the Congo' : 4369683,
'Denmark' : 57810,
'Djibouti' : 23946,
'Dominica' : 738,
'Dominican Republic' : 203183,
'Ecuador' : 270300,
'Egypt' : 2405717,
'El Salvador' : 99428,
'Equatorial Guinea' : 54694,
'Eritrea' : 99058,
'Estonia' : 11036,
'Eswatini' : 29622,
'Ethiopia' : 4105685,
'Falkland Islands' : 39,
'Faroe Islands' : 690,
'Federated States of Micronesia' : 2512,
'Fiji' : 16631,
'Finland' : 43556,
'France' : 638891,
'French Guiana' : 7707,
'French Polynesia' : 3066,
'Gabon' : 68745,
'Gambia' : 82092,
'Georgia' : 43765,
'Germany' : 719249,
'Ghana' : 888947,
'Gibraltar' : 464,
'Greece' : 73661,
'Greenland' : 789,
'Grenada' : 1371,
'Guadeloupe' : 4233,
'Guam' : 2941,
'Guatemala' : 377167,
'Guernsey' : 521,
'Guinea' : 487595,
'Guinea-Bissau' : 64679,
'Guyana' : 16764,
'Haiti' : 258348,
'Honduras' : 233793,
'Hong Kong' : 41294,
'Hungary' : 85373,
'Iceland' : 4347,
'India' : 29466366,
'Indonesia' : 4482359,
'Iran' : 1173463,
'Iraq' : 1159682,
'Ireland' : 53268,
'Isle of Man' : 702,
'Israel' : 172312,
'Italy' : 384627,
'Ivory Coast' : 997001,
'Jamaica' : 33007,
'Japan' : 749884,
'Jersey' : 853,
'Jordan' : 235776,
'Kazakhstan' : 409417,
'Kenya' : 1499998,
'Kiribati' : 3421,
'Kosovo' : 20514,
'Kuwait' : 49342,
'Kyrgyzstan' : 150759,
'Laos' : 163043,
'Latvia' : 14250,
'Lebanon' : 93205,
'Lesotho' : 55728,
'Liberia' : 170065,
'Libya' : 124371,
'Liechtenstein' : 371,
'Lithuania' : 21434,
'Luxembourg' : 6946,
'Macau' : 4515,
'Madagascar' : 1001244,
'Malawi' : 662289,
'Malaysia' : 435989,
'Maldives' : 5795,
'Mali' : 951445,
'Malta' : 4213,
'Marshall Islands' : 821,
'Martinique' : 3728,
'Mauritania' : 172885,
'Mauritius' : 11804,
'Mayotte' : 11186,
'Mexico' : 2037689,
'Moldova' : 32986,
'Monaco' : 368,
'Mongolia' : 65019,
'Montenegro' : 6981,
'Montserrat' : 39,
'Morocco' : 629832,
'Mozambique' : 1260855,
'Myanmar' : 903822,
'Namibia' : 76715,
'Nauru' : 303,
'Nepal' : 574297,
'Netherlands' : 167842,
'New Caledonia' : 4134,
'New Zealand' : 59236,
'Nicaragua' : 132214,
'Niger' : 1095892,
'Nigeria' : 7509758,
'Niue' : 25,
'North Korea' : 342038,
'North Macedonia' : 16878,
'Northern Mariana Islands' : 583,
'Norway' : 51545,
'Oman' : 85065,
'Pakistan' : 6882058,
'Palau' : 193,
'Palestine' : 146384,
'Panama' : 71469,
'Papua New Guinea' : 255331,
'Paraguay' : 136778,
'Peru' : 539623,
'Philippines' : 1840477,
'Poland' : 317916,
'Portugal' : 86646,
'Puerto Rico' : 18851,
'Qatar' : 29516,
'Republic of the Congo' : 189365,
'R√©union' : 12003,
'Romania' : 183623,
'Russia' : 1297207,
'Rwanda' : 395578,
'Saint Barth√©lemy' : 53,
'Saint Helena, Ascension and Tristan da Cunha' : 39,
'Saint Kitts and Nevis' : 549,
'Saint Lucia' : 2019,
'Saint Martin' : 470,
'Saint Pierre and Miquelon' : 30,
'Saint Vincent and the Grenadines' : 1232,
'Samoa' : 5503,
'San Marino' : 200,
'S√£o Tom√© and Pr√≠ncipe' : 6507,
'Saudi Arabia' : 546038,
'Senegal' : 531890,
'Serbia' : 59840,
'Seychelles' : 1744,
'Sierra Leone' : 258903,
'Singapore' : 47472,
'Sint Maarten' : 390,
'Slovakia' : 52271,
'Slovenia' : 17902,
'Solomon Islands' : 21548,
'Somalia' : 788763,
'South Africa' : 1186793,
'South Korea' : 236394,
'South Sudan' : 328308,
'Spain' : 336821,
'Sri Lanka' : 324102,
'Sudan' : 1682049,
'Suriname' : 10879,
'Sweden' : 97915,
'Switzerland' : 83702,
'Syria' : 521601,
'Taiwan' : 132404,
'Tajikistan' : 271420,
'Tanzania' : 2346391,
'Thailand' : 591200,
'Timor-Leste' : 30561,
'Togo' : 289759,
'Tokelau' : 47,
'Tonga' : 2418,
'Trinidad and Tobago' : 16094,
'Tunisia' : 167729,
'Turkey' : 1072014,
'Turkmenistan' : 160100,
'Turks and Caicos Islands' : 496,
'Tuvalu' : 226,
'Uganda' : 1712750,
'Ukraine' : 212231,
'United Arab Emirates' : 104015,
'United Kingdom' : 1180351,
'United States' : 3657476,
'United States Virgin Islands' : 959,
'Uruguay' : 33443,
'Uzbekistan' : 943547,
'Vanuatu' : 8988,
'Vatican City' : 2,
'Venezuela' : 426984,
'Vietnam' : 1387961,
'Wallis and Futuna' : 98,
'Western Sahara' : 8987,
'Yemen' : 1386914,
'Zambia' : 685565,
'Zimbabwe' : 496917,
}

# Create DataFrame
df = pd.DataFrame(list(country_population.items()), columns=["Country", "Live Births (2023)"])



# Normalize population into probabilities
df["Probability"] = (df["Live Births (2023)"] / df["Live Births (2023)"].sum())
df['Live Births (2023)'] = df['Live Births (2023)'].map('{:,d}'.format)


st.title("üåç Where Would You Be Born?")

st.markdown("This simulation uses live birth statistics to randomly choose a country where you would most likely be born.")

if st.button("üé≤ Randomize My Birth Country"):
    chosen_country = random.choices(df["Country"], weights=df["Probability"], k=1)[0]
    st.success(f"You could have been born in **{chosen_country}**!")

st.caption("Figures are from the 2024 revision of the United Nations World Population Prospects report, for the calendar year 2023.")

st.dataframe(df.sort_values("Probability", ascending=False), use_container_width=True)
